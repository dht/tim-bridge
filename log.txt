[2026-01-18T15:14:24.894Z] INFO  === TIM BRIDGE v1.0.36 STARTING ===
[2026-01-18T15:14:24.894Z] INFO  IP Address: 10.0.0.21
[2026-01-18T15:14:24.895Z] WARN  ‚ö†Ô∏è  Listening to ALL machines
[2026-01-18T15:14:24.989Z] INFO  üéß Machine ID: A-001 (collection: "machines")
[2026-01-18T15:14:24.990Z] INFO  A-001 onStart { ip: '10.0.0.21' }
[2026-01-18T15:14:25.095Z] INFO  üéß Machine ID: A-002 (collection: "machines")
[2026-01-18T15:14:25.095Z] INFO  A-002 onStart { ip: '10.0.0.21' }
[2026-01-18T15:14:25.194Z] INFO  üéß Machine ID: A-003 (collection: "state")
[2026-01-18T15:14:25.194Z] INFO  A-003 onStart { ip: '10.0.0.21' }
[2026-01-18T15:14:25.292Z] INFO  üéß Machine ID: A-004 (collection: "machines")
[2026-01-18T15:14:25.293Z] INFO  A-004 onStart { ip: '10.0.0.21' }
[2026-01-18T15:14:25.397Z] INFO  üéß Machine ID: A-901 (collection: "machines")
[2026-01-18T15:14:25.397Z] INFO  A-901 onStart { ip: '10.0.0.21' }
[2026-01-18T15:14:25.564Z] INFO  A-001 onChange { status: '3a.PLAYBACK', hasTimelineUrl: true }
[2026-01-18T15:14:25.567Z] INFO  timeline: playback start {
  machineId: 'A-001',
  timelineUrl: 'https://storage.googleapis.com/tim-os.firebasestorage.app/sessions/_test/_timeline.json?rnd=0.004483408646704379',
  myToken: 1
}
[2026-01-18T15:14:25.567Z] INFO  cache: start session cache {
  machineId: 'A-001',
  timelineUrl: 'https://storage.googleapis.com/tim-os.firebasestorage.app/sessions/_test/_timeline.json?rnd=0.004483408646704379'
}
[2026-01-18T15:14:25.579Z] INFO  A-001 onChange { status: '3a.PLAYBACK', hasTimelineUrl: true }
[2026-01-18T15:14:25.580Z] WARN  ‚è≥ Playback already running, ignoring new timelineUrl { machineId: 'A-001' }
[2026-01-18T15:14:25.772Z] INFO  cache: ensure dir { path: '/Users/dht/projects/tim-bridge/cache/_test' }
[2026-01-18T15:14:25.775Z] INFO  cache: downloading timeline {
  timelineUrl: 'https://storage.googleapis.com/tim-os.firebasestorage.app/sessions/_test/_timeline.json?rnd=0.004483408646704379',
  timelinePath: '/Users/dht/projects/tim-bridge/cache/_test/timeline.json'
}
[2026-01-18T15:14:26.070Z] INFO  cache: timeline saved {
  timelinePath: '/Users/dht/projects/tim-bridge/cache/_test/timeline.json'
}
[2026-01-18T15:14:26.070Z] INFO  cache: caching assets { sessionId: '_test', assetCount: 8 }
[2026-01-18T15:14:26.071Z] INFO  cache: ensure dir { path: '/Users/dht/projects/tim-bridge/cache/_test' }
[2026-01-18T15:14:26.500Z] INFO  cache: asset downloaded {
  url: 'https://storage.googleapis.com/tim-os.firebasestorage.app/sessions/_test/line-1A.mp3',
  destPath: '/Users/dht/projects/tim-bridge/cache/_test/line-1A.mp3'
}
[2026-01-18T15:14:26.501Z] INFO  cache: ensure dir { path: '/Users/dht/projects/tim-bridge/cache/_test' }
[2026-01-18T15:14:26.683Z] WARN  cache: asset download failed (http) {
  url: 'https://storage.googleapis.com/tim-os.firebasestorage.app/sessions/_test/line-1A.jpg',
  status: 403
}
[2026-01-18T15:14:26.684Z] INFO  cache: ensure dir { path: '/Users/dht/projects/tim-bridge/cache/_test' }
[2026-01-18T15:14:27.193Z] INFO  cache: asset downloaded {
  url: 'https://storage.googleapis.com/tim-os.firebasestorage.app/sessions/_test/line-2B.mp3',
  destPath: '/Users/dht/projects/tim-bridge/cache/_test/line-2B.mp3'
}
[2026-01-18T15:14:27.194Z] INFO  cache: ensure dir { path: '/Users/dht/projects/tim-bridge/cache/_test' }
[2026-01-18T15:14:27.383Z] WARN  cache: asset download failed (http) {
  url: 'https://storage.googleapis.com/tim-os.firebasestorage.app/sessions/_test/line-2B.jpg',
  status: 403
}
[2026-01-18T15:14:27.384Z] INFO  cache: ensure dir { path: '/Users/dht/projects/tim-bridge/cache/_test' }
[2026-01-18T15:14:27.869Z] INFO  cache: asset downloaded {
  url: 'https://storage.googleapis.com/tim-os.firebasestorage.app/sessions/_test/line-3A.mp3',
  destPath: '/Users/dht/projects/tim-bridge/cache/_test/line-3A.mp3'
}
[2026-01-18T15:14:27.869Z] INFO  cache: ensure dir { path: '/Users/dht/projects/tim-bridge/cache/_test' }
[2026-01-18T15:14:28.049Z] WARN  cache: asset download failed (http) {
  url: 'https://storage.googleapis.com/tim-os.firebasestorage.app/sessions/_test/line-3A.jpg',
  status: 403
}
[2026-01-18T15:14:28.050Z] INFO  cache: ensure dir { path: '/Users/dht/projects/tim-bridge/cache/_test' }
[2026-01-18T15:14:28.573Z] INFO  cache: asset downloaded {
  url: 'https://storage.googleapis.com/tim-os.firebasestorage.app/sessions/_test/line-4B.mp3',
  destPath: '/Users/dht/projects/tim-bridge/cache/_test/line-4B.mp3'
}
[2026-01-18T15:14:28.574Z] INFO  cache: ensure dir { path: '/Users/dht/projects/tim-bridge/cache/_test' }
[2026-01-18T15:14:28.761Z] WARN  cache: asset download failed (http) {
  url: 'https://storage.googleapis.com/tim-os.firebasestorage.app/sessions/_test/line-4B.jpg',
  status: 403
}
[2026-01-18T15:14:28.762Z] INFO  cache: session cache complete {
  sessionId: '_test',
  sessionDir: '/Users/dht/projects/tim-bridge/cache/_test',
  assetsFailed: 4
}
[2026-01-18T15:14:28.762Z] INFO  ‚úÖ Session cached { sessionId: '_test', items: 6 }
[2026-01-18T15:14:28.771Z] INFO  A-001 onChange { status: '3a.PLAYBACK', hasTimelineUrl: true }
[2026-01-18T15:14:28.772Z] WARN  ‚è≥ Playback already running, ignoring new timelineUrl { machineId: 'A-001' }
[2026-01-18T15:14:28.955Z] INFO  timeline: item { hasAudio: false, hasLight: true, durationSec: 0 }
[2026-01-18T15:14:28.955Z] INFO  timeline: lights { lightStatus: 'NONE' }
[2026-01-18T15:14:30.462Z] INFO  timeline: item { hasAudio: true, hasLight: true, durationSec: 2.77 }
[2026-01-18T15:14:30.463Z] INFO  timeline: lights { lightStatus: 'ONE' }
[2026-01-18T15:14:30.465Z] INFO  timeline: play mp3 { localMp3: '/Users/dht/projects/tim-bridge/cache/_test/line-1A.mp3' }
[2026-01-18T15:14:34.775Z] INFO  timeline: item { hasAudio: true, hasLight: true, durationSec: 3.16 }
[2026-01-18T15:14:34.775Z] INFO  timeline: lights { lightStatus: 'TWO' }
[2026-01-18T15:14:34.776Z] INFO  timeline: play mp3 { localMp3: '/Users/dht/projects/tim-bridge/cache/_test/line-2B.mp3' }
[2026-01-18T15:14:39.447Z] INFO  timeline: item { hasAudio: true, hasLight: true, durationSec: 2.77 }
[2026-01-18T15:14:39.448Z] INFO  timeline: lights { lightStatus: 'ONE' }
[2026-01-18T15:14:39.449Z] INFO  timeline: play mp3 { localMp3: '/Users/dht/projects/tim-bridge/cache/_test/line-3A.mp3' }
[2026-01-18T15:14:43.729Z] INFO  timeline: item { hasAudio: true, hasLight: true, durationSec: 2.69 }
[2026-01-18T15:14:43.730Z] INFO  timeline: lights { lightStatus: 'TWO' }
[2026-01-18T15:14:43.731Z] INFO  timeline: play mp3 { localMp3: '/Users/dht/projects/tim-bridge/cache/_test/line-4B.mp3' }
[2026-01-18T15:14:47.930Z] INFO  timeline: item { hasAudio: false, hasLight: true, durationSec: 0 }
[2026-01-18T15:14:47.931Z] INFO  timeline: lights { lightStatus: 'NONE' }
[2026-01-18T15:14:49.432Z] INFO  üèÅ Timeline done
[2026-01-18T15:14:49.437Z] INFO  A-001 onChange { status: '3a.PLAYBACK', hasTimelineUrl: true }
[2026-01-18T15:14:49.437Z] INFO  timeline: playback start {
  machineId: 'A-001',
  timelineUrl: 'https://storage.googleapis.com/tim-os.firebasestorage.app/sessions/_test/_timeline.json?rnd=0.004483408646704379',
  myToken: 2
}
[2026-01-18T15:14:49.439Z] INFO  cache: start session cache {
  machineId: 'A-001',
  timelineUrl: 'https://storage.googleapis.com/tim-os.firebasestorage.app/sessions/_test/_timeline.json?rnd=0.004483408646704379'
}
[2026-01-18T15:14:49.445Z] INFO  A-001 onChange { status: '3a.PLAYBACK', hasTimelineUrl: true }
[2026-01-18T15:14:49.446Z] WARN  ‚è≥ Playback already running, ignoring new timelineUrl { machineId: 'A-001' }
[2026-01-18T15:14:49.638Z] INFO  timeline: playback ended { machineId: 'A-001', myToken: 1 }
[2026-01-18T15:14:49.655Z] INFO  cache: ensure dir { path: '/Users/dht/projects/tim-bridge/cache/_test' }
[2026-01-18T15:14:49.656Z] INFO  cache: timeline cache hit {
  timelinePath: '/Users/dht/projects/tim-bridge/cache/_test/timeline.json'
}
[2026-01-18T15:14:49.658Z] INFO  cache: caching assets { sessionId: '_test', assetCount: 8 }
[2026-01-18T15:14:49.658Z] INFO  cache: ensure dir { path: '/Users/dht/projects/tim-bridge/cache/_test' }
[2026-01-18T15:14:49.659Z] INFO  cache: asset already present { destPath: '/Users/dht/projects/tim-bridge/cache/_test/line-1A.mp3' }
[2026-01-18T15:14:49.659Z] INFO  cache: ensure dir { path: '/Users/dht/projects/tim-bridge/cache/_test' }
[2026-01-18T15:14:49.922Z] WARN  cache: asset download failed (http) {
  url: 'https://storage.googleapis.com/tim-os.firebasestorage.app/sessions/_test/line-1A.jpg',
  status: 403
}
[2026-01-18T15:14:49.923Z] INFO  cache: ensure dir { path: '/Users/dht/projects/tim-bridge/cache/_test' }
[2026-01-18T15:14:49.925Z] INFO  cache: asset already present { destPath: '/Users/dht/projects/tim-bridge/cache/_test/line-2B.mp3' }
[2026-01-18T15:14:49.925Z] INFO  cache: ensure dir { path: '/Users/dht/projects/tim-bridge/cache/_test' }
[2026-01-18T15:14:50.179Z] WARN  cache: asset download failed (http) {
  url: 'https://storage.googleapis.com/tim-os.firebasestorage.app/sessions/_test/line-2B.jpg',
  status: 403
}
[2026-01-18T15:14:50.180Z] INFO  cache: ensure dir { path: '/Users/dht/projects/tim-bridge/cache/_test' }
[2026-01-18T15:14:50.182Z] INFO  cache: asset already present { destPath: '/Users/dht/projects/tim-bridge/cache/_test/line-3A.mp3' }
[2026-01-18T15:14:50.183Z] INFO  cache: ensure dir { path: '/Users/dht/projects/tim-bridge/cache/_test' }
[2026-01-18T15:14:50.455Z] WARN  cache: asset download failed (http) {
  url: 'https://storage.googleapis.com/tim-os.firebasestorage.app/sessions/_test/line-3A.jpg',
  status: 403
}
[2026-01-18T15:14:50.458Z] INFO  cache: ensure dir { path: '/Users/dht/projects/tim-bridge/cache/_test' }
[2026-01-18T15:14:50.461Z] INFO  cache: asset already present { destPath: '/Users/dht/projects/tim-bridge/cache/_test/line-4B.mp3' }
[2026-01-18T15:14:50.462Z] INFO  cache: ensure dir { path: '/Users/dht/projects/tim-bridge/cache/_test' }
[2026-01-18T15:14:50.723Z] WARN  cache: asset download failed (http) {
  url: 'https://storage.googleapis.com/tim-os.firebasestorage.app/sessions/_test/line-4B.jpg',
  status: 403
}
[2026-01-18T15:14:50.724Z] INFO  cache: session cache complete {
  sessionId: '_test',
  sessionDir: '/Users/dht/projects/tim-bridge/cache/_test',
  assetsFailed: 4
}
[2026-01-18T15:14:50.725Z] INFO  ‚úÖ Session cached { sessionId: '_test', items: 6 }
[2026-01-18T15:14:50.729Z] INFO  A-001 onChange { status: '3a.PLAYBACK', hasTimelineUrl: true }
[2026-01-18T15:14:50.732Z] WARN  ‚è≥ Playback already running, ignoring new timelineUrl { machineId: 'A-001' }
[2026-01-18T15:14:50.925Z] INFO  timeline: item { hasAudio: false, hasLight: true, durationSec: 0 }
[2026-01-18T15:14:50.925Z] INFO  timeline: lights { lightStatus: 'NONE' }
[2026-01-18T15:14:52.428Z] INFO  timeline: item { hasAudio: true, hasLight: true, durationSec: 2.77 }
[2026-01-18T15:14:52.428Z] INFO  timeline: lights { lightStatus: 'ONE' }
[2026-01-18T15:14:52.429Z] INFO  timeline: play mp3 { localMp3: '/Users/dht/projects/tim-bridge/cache/_test/line-1A.mp3' }
[2026-01-18T15:14:56.718Z] INFO  timeline: item { hasAudio: true, hasLight: true, durationSec: 3.16 }
[2026-01-18T15:14:56.719Z] INFO  timeline: lights { lightStatus: 'TWO' }
[2026-01-18T15:14:56.719Z] INFO  timeline: play mp3 { localMp3: '/Users/dht/projects/tim-bridge/cache/_test/line-2B.mp3' }
[2026-01-18T15:15:00.101Z] INFO  Cleaning up before exit...
[2026-01-18T15:15:00.227Z] INFO  A-001 onEnd
[2026-01-18T15:15:00.523Z] INFO  A-002 onEnd
[2026-01-18T15:15:00.865Z] INFO  A-003 onEnd
[2026-01-18T15:15:01.194Z] INFO  A-004 onEnd
[2026-01-18T15:15:01.389Z] INFO  timeline: item { hasAudio: true, hasLight: true, durationSec: 2.77 }
[2026-01-18T15:15:01.390Z] INFO  timeline: lights { lightStatus: 'ONE' }
[2026-01-18T15:15:01.391Z] INFO  timeline: play mp3 { localMp3: '/Users/dht/projects/tim-bridge/cache/_test/line-3A.mp3' }
[2026-01-18T15:15:01.695Z] INFO  A-901 onEnd
